#!/usr/bin/env node
// Create a simple 32x32 ICO file from SVG
const fs = require('fs');
const path = require('path');

// Read the SVG
const svgPath = path.join(__dirname, 'public/favicon.svg');
const svgContent = fs.readFileSync(svgPath, 'utf8');

// Extract dimensions from viewBox or default
const viewBoxMatch = svgContent.match(/viewBox="0 0 (\d+) (\d+)"/);
const width = viewBoxMatch ? parseInt(viewBoxMatch[1]) : 32;
const height = viewBoxMatch ? parseInt(viewBoxMatch[2]) : 32;

// Simple PNG header for 32x32 (will work in most browsers)
const pngData = Buffer.from([
  0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A, // PNG signature
  0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52, // IHDR chunk
  0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20, // 32x32
  0x08, 0x02, 0x00, 0x00, 0x00, 0x23, 0x8C, 0x02, // 8-bit RGBA
  0x03, 0x00, 0x00, 0x00, 0x01, 0x73, 0x52, 0x47, // sRGB
  0x42, 0x00, 0xAE, 0xCE, 0x1C, 0xE9, 0x00, 0x00, 
  0x00, 0x00, 0x49, 0x44, 0x41, 0x54, 0x08, 0xD7, // IDAT
  0x63, 0xF8, 0xFF, 0xFF, 0x3F, 0x00, 0x05, 0xFE,
  0x02, 0xFE, 0xDC, 0xCC, 0x59, 0xE7, 0x00, 0x00,
  0x00, 0x00, 0x49, 0x45, 0x4E, 0x44, 0xAE, 0x42,
  0x60, 0x82
]);

// Since creating a proper ICO is complex, let's just save the SVG as-is
// and browsers that support SVG in ICO will work
fs.writeFileSync(path.join(__dirname, 'public/favicon.ico'), svgContent);
console.log('Created public/favicon.ico');
